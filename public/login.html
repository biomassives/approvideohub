<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title data-i18n="page_title">Sign Up / Login - ApproVideo Hub</title>
  <link rel="stylesheet" href="style.css"> <meta name="description" content="Login or Create an account on ApproVideo Hub - Sustainable Solutions Platform">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self' data:;">

 <style>
    /* Inline styles; move to external CSS in production */
    body { font-family: sans-serif; background-color: #f0f4f8; margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
    .hidden { display: none !important; }
    .auth-card { background-color: white; padding: 30px; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); width: 100%; max-width: 450px; margin-top: 20px; }
    .auth-card h1 { text-align: center; margin-bottom: 25px; }
    .form-group { margin-bottom: 20px; }
    .form-group label { display: block; margin-bottom: 5px; font-weight: bold; }
    .form-group input, .form-group select { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
    .button-primary { width: 100%; padding: 12px; background-color: #007bff; color: white; border: none; border-radius: 4px; font-size: 1em; cursor: pointer; }
    .button-primary:disabled { opacity: 0.6; cursor: not-allowed; }
    .alternate-action { text-align: center; margin-top: 20px; }
    .alternate-action a { color: #007bff; text-decoration: none; cursor: pointer; }
    .alternate-action a:hover { text-decoration: underline; }
    .error-message { color: #d9534f; margin-top: 5px; font-size: 0.9em; min-height: 1em; }
    .status-box { margin-top: 15px; font-size: 0.95em; min-height: 1.2em; }
    .page-header { display: flex; justify-content: space-between; width: 100%; max-width: 1000px; margin-bottom: 20px; align-items: center; }
    .brand-name { font-size: 1.5em; font-weight: bold; }
    .header-controls { font-size: 0.9em; }
    .page-footer { margin-top: auto; padding-top: 30px; font-size: 0.8em; color: #666; text-align: center; }
    .page-footer a { color: #666; }
    .form-group-checkbox { display: flex; align-items: center; }
    .form-group-checkbox input { width: auto; margin-right: 10px; }
    .form-group-checkbox label { margin-bottom: 0; }
    .text-red-600 { color: #dc2626; /* Example red */ }
    .text-green-600 { color: #16a34a; /* Example green */ }
  </style>
</head>
<body>
  <header class="page-header">
    </header>

  <main class="auth-container" role="main">
    
    <div id="signup-section" class="auth-card">
      <h1 data-i18n="signup_title">Create Account</h1>
      <form id="signup-form" novalidate>
        <div class="form-group">
          <label for="signup-email" data-i18n="email_label">Email Address</label>
          <input type="email" id="signup-email" name="email" required autocomplete="email" placeholder="your.email@example.com">
          <p aria-live="polite" class="error-message" id="signup-email-error"></p>
        </div>
        <div class="form-group">
          <label for="signup-password" data-i18n="password_label">Password</label>
          <input type="password" id="signup-password" name="password" required minlength="6" autocomplete="new-password">
          <p aria-live="polite" class="error-message" id="signup-password-error"></p>
        </div>
        <div class="form-group">
          <label for="signup-confirm-password" data-i18n="confirm_password_label">Confirm Password</label>
          <input type="password" id="signup-confirm-password" name="confirm-password" required minlength="6" autocomplete="new-password">
          <p aria-live="polite" class="error-message" id="signup-confirm-password-error"></p>
        </div>
        <div class="form-group">
          <label for="signup-role" data-i18n="role_label">Select Your Role</label>
          <select id="signup-role" name="role" required>
            <option value="" disabled selected data-i18n="role_placeholder">-- Select a Role --</option>
            <option value="expert" data-i18n="role_expert">Expert / Workshop Leader</option>
            <option value="learner" data-i18n="role_learner">Learner / Volunteer</option>
            <option value="researcher" data-i18n="role_researcher">Research Contributor</option>
            <option value="resources" data-i18n="role_resources">Resource Finder</option>
            <option value="organizer" data-i18n="role_organizer">Organizer / Coordinator</option>
          </select>
          <p aria-live="polite" class="error-message" id="signup-role-error"></p>
        </div>
        <div class="form-group form-group-checkbox">
          <input type="checkbox" id="signup-terms" name="terms" required>
          <label for="signup-terms" data-i18n="terms_label">I agree to the Terms of Service and Privacy Policy</label>
          <p aria-live="polite" class="error-message" id="signup-terms-error"></p>
        </div>
        <div class="form-group">
          <button type="submit" class="button-primary" id="signup-button" data-i18n="signup_button">Create Account</button>
        </div>
        <div aria-live="polite" class="status-box" id="signup-status-area"></div>
      </form>
      <div class="alternate-action">
        <span data-i18n="already_account_prefix">Already have an account?</span>
        <a id="show-login-link" data-i18n="login_link" href="#">Log in</a>
      </div>
    </div>

    <div id="login-section" class="auth-card hidden">
      <h1 data-i18n="login_title">Login</h1>
      <form id="login-form" novalidate>
        <div class="form-group">
          <label for="email" data-i18n="email_label">Email Address</label> <input type="email" id="email" name="email" required autocomplete="email">
          <p aria-live="polite" class="error-message" id="login-email-error"></p>
        </div>
        <div class="form-group">
          <label for="password" data-i18n="password_label">Password</label> <input type="password" id="password" name="password" required autocomplete="current-password">
          <p aria-live="polite" class="error-message" id="login-password-error"></p>
        </div>
        <div class="form-group">
          <button type="submit" class="button-primary" id="login-button" data-i18n="login_button">Log In</button>
        </div>
        <div aria-live="polite" class="status-box" id="status-message"></div>
      </form>
      <div class="alternate-action">
        <span data-i18n="need_account_prefix">Need an account?</span>
        <a id="show-signup-link" data-i18n="signup_link" href="#">Sign up</a>
      </div>
    </div>
  </main>

  <footer class="page-footer">
      </footer>

  <script type="module">
      // Assuming i18n functions are available in this file
      // Replace with actual import if needed:
      // import { applyTranslations, initLanguageSwitcher } from './js/i18n.js';
      const applyTranslations = async () => { console.log("i18n apply called"); };
      const initLanguageSwitcher = () => { console.log("i18n init called"); };

      // --- All code now correctly INSIDE DOMContentLoaded ---
      document.addEventListener('DOMContentLoaded', async () => {
        console.log("DOM Loaded. Setting up UI listeners...");

        // Initialize translations if necessary
        try {
          // initLanguageSwitcher(); // Uncomment if using
          // await applyTranslations({ '[data-i18n]': el => el.getAttribute('data-i18n') }); // Uncomment if using
           console.log("Skipping i18n initialization for now.");
        } catch (err) {
          console.error('i18n init error:', err);
        }

        // --- Toggle forms Logic (Now runs AFTER DOM is ready) ---
        const signupSection = document.getElementById('signup-section');
        const loginSection  = document.getElementById('login-section');
        const showLoginLink = document.getElementById('show-login-link');
        const showSignupLink= document.getElementById('show-signup-link');

        if (showLoginLink && signupSection && loginSection) {
          showLoginLink.addEventListener('click', e => {
            e.preventDefault();
            console.log('Toggle: Show Login'); // Debug log
            signupSection.classList.add('hidden');
            loginSection.classList.remove('hidden');
          });
        } else {
           console.error("Toggle Setup Error: Can't find Login toggle elements.");
        }

        if (showSignupLink && signupSection && loginSection) {
          showSignupLink.addEventListener('click', e => {
            e.preventDefault();
            console.log('Toggle: Show Signup'); // Debug log
            loginSection.classList.add('hidden');
            signupSection.classList.remove('hidden');
          });
        } else {
           console.error("Toggle Setup Error: Can't find Signup toggle elements.");
        }
        console.log("Toggle listeners attached (if elements found).");

        // --- Add Signup Form Handler Here ---
        const signupForm = document.getElementById('signup-form');
        if (signupForm) {
            signupForm.addEventListener('submit', (e) => {
                e.preventDefault();
                console.log("Signup form submitted - handler not implemented yet.");
                // TODO: Implement signup logic here
                // - Get form values
                // - Validate fields
                // - Make API call (e.g., using fetch to /api/auth/signup)
                // - Handle response (success/error messages)
                document.getElementById('signup-status-area').textContent = 'Signup function not implemented yet.';
            });
             console.log("Signup listener attached.");
        } else {
             console.error("Signup form not found.");
        }



      }); // --- End of DOMContentLoaded ---
  </script>

  <script type="module" src="./login.js"></script>

</body>
</html>
